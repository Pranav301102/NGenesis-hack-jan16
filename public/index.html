<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NGenesis - Agents on Demand</title>
    <link rel="stylesheet" href="/css/app.css">
</head>
<body>
    <div class="app-layout">
        <!-- Left Sidebar - Agent List -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <h1 class="logo">âš¡ NGenesis</h1>
            </div>
            <div class="sidebar-section">
                <h3>Your Agents</h3>
                <div id="agentList" class="agent-list">
                    <div class="empty-state-small">No agents yet</div>
                </div>
            </div>
            <div class="sidebar-section">
                <h3>Active Scouts</h3>
                <div id="scoutList" class="scout-list">
                    <div class="empty-state-small">No scouts active</div>
                </div>
            </div>
            <div class="sidebar-footer">
                <button class="btn-new-agent" onclick="focusCreatePanel()">
                    + New Agent
                </button>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Top Navigation Bar -->
            <nav class="top-nav">
                <div class="nav-left">
                    <span id="currentView">Dashboard</span>
                </div>
                <div class="nav-right">
                    <div id="userSection" class="user-section">
                        <button class="btn-nav" onclick="showAuthModal('login')">Login</button>
                        <button class="btn-nav-primary" onclick="showAuthModal('register')">Sign Up</button>
                    </div>
                </div>
            </nav>

            <!-- Available Tools Section -->
            <section class="tools-section">
                <div class="tools-header">
                    <h2>ğŸ§° Select Tools</h2>
                    <span class="tools-subtitle">Click to enable/disable tools for your task</span>
                </div>
                <div id="toolsGrid" class="tools-grid">
                    <div class="tool-card" data-tool="gemini">
                        <div class="tool-icon">ğŸ§ </div>
                        <div class="tool-info">
                            <div class="tool-name">Gemini 2.5</div>
                            <div class="tool-desc">AI reasoning & planning</div>
                        </div>
                        <div class="tool-usage" id="gemini-usage">Planning task approach</div>
                    </div>
                    <div class="tool-card" data-tool="agentql">
                        <div class="tool-icon">ğŸ¤–</div>
                        <div class="tool-info">
                            <div class="tool-name">AgentQL</div>
                            <div class="tool-desc">Self-healing web scraping</div>
                        </div>
                        <div class="tool-usage" id="agentql-usage">Extract data from websites</div>
                    </div>
                    <div class="tool-card" data-tool="freepik">
                        <div class="tool-icon">ğŸ¨</div>
                        <div class="tool-info">
                            <div class="tool-name">Freepik AI</div>
                            <div class="tool-desc">Image generation</div>
                        </div>
                        <div class="tool-usage" id="freepik-usage">Generate custom images</div>
                    </div>
                    <div class="tool-card" data-tool="yutori">
                        <div class="tool-icon">ğŸ‘ï¸</div>
                        <div class="tool-info">
                            <div class="tool-name">Yutori</div>
                            <div class="tool-desc">Continuous monitoring</div>
                        </div>
                        <div class="tool-usage" id="yutori-usage">Watch for changes over time</div>
                    </div>
                </div>
            </section>

            <!-- Timeline / Pipeline Section -->
            <section id="pipelineSection" class="pipeline-section">
                <div class="pipeline-header">
                    <h2>ğŸ”§ Agent Pipeline</h2>
                    <span class="pipeline-status" id="pipelineStatus">Ready to create</span>
                </div>
                <div id="pipelineSteps" class="pipeline-steps">
                    <div class="pipeline-step pending" id="step-plan" data-step="plan">
                        <div class="step-icon">ğŸ§ </div>
                        <div class="step-info">
                            <div class="step-label">Plan</div>
                            <div class="step-desc">Analyze task</div>
                        </div>
                    </div>
                    <div class="pipeline-connector"></div>
                    <div class="pipeline-step pending" id="step-generate" data-step="generate">
                        <div class="step-icon">ğŸ’»</div>
                        <div class="step-info">
                            <div class="step-label">Generate</div>
                            <div class="step-desc">Write code</div>
                        </div>
                    </div>
                    <div class="pipeline-connector"></div>
                    <div class="pipeline-step pending" id="step-test" data-step="test">
                        <div class="step-icon">ğŸ§ª</div>
                        <div class="step-info">
                            <div class="step-label">Test</div>
                            <div class="step-desc">Validate</div>
                        </div>
                    </div>
                    <div class="pipeline-connector"></div>
                    <div class="pipeline-step pending" id="step-review" data-step="review">
                        <div class="step-icon">âœ¨</div>
                        <div class="step-info">
                            <div class="step-label">Review</div>
                            <div class="step-desc">Quality check</div>
                        </div>
                    </div>
                    <div class="pipeline-connector"></div>
                    <div class="pipeline-step pending" id="step-deploy" data-step="deploy">
                        <div class="step-icon">ğŸš€</div>
                        <div class="step-info">
                            <div class="step-label">Deploy</div>
                            <div class="step-desc">Go live</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Live Output Section -->
            <section id="outputSection" class="output-section">
                <div class="output-header">
                    <h2>ğŸ“Š Live Output</h2>
                    <div class="output-actions">
                        <button id="runAgentBtn" class="btn-run" onclick="runSelectedAgent()" disabled>
                            â–¶ï¸ Run
                        </button>
                        <button class="btn-icon-small" onclick="clearOutput()" title="Clear">ğŸ—‘ï¸</button>
                        <button class="btn-icon-small" onclick="copyOutput()" title="Copy">ğŸ“‹</button>
                        <button class="btn-icon-small" onclick="downloadOutput()" title="Download">â¬‡ï¸</button>
                    </div>
                </div>
                <div id="outputContainer" class="output-container">
                    <div class="output-placeholder">
                        <div class="placeholder-icon">ğŸ“­</div>
                        <p>Select an agent and run it to see output</p>
                    </div>
                </div>
                <!-- Previous Results -->
                <div id="resultsHistory" class="results-history">
                    <div class="results-history-header" onclick="toggleResultsHistory()">
                        <span>ğŸ“ Previous Results</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div id="resultsHistoryContent" class="results-history-content" style="display: none;">
                        <div class="empty-state-small">No previous results</div>
                    </div>
                </div>
            </section>

            <!-- Bottom Input Section -->
            <section id="inputSection" class="input-section">
                <!-- Example Tasks -->
                <div class="example-tasks">
                    <span class="example-label">Try:</span>
                    <button class="example-btn" onclick="setExampleTask('research')">ï¿½ Research AI trends and generate a blog header image</button>
                    <button class="example-btn" onclick="setExampleTask('monitor')">ï¿½ Monitor iPhone prices on Amazon and alert me</button>
                    <button class="example-btn" onclick="setExampleTask('scrape')">ï¿½ Scrape product reviews and summarize them</button>
                </div>

                <!-- Main Prompt Input -->
                <div class="prompt-row">
                    <div class="prompt-wrapper">
                        <textarea id="mainPrompt" class="main-prompt" placeholder="Describe your task... e.g., 'Research the latest AI news, summarize findings, and generate a professional blog image about it'" rows="2"></textarea>
                    </div>
                    <input type="url" id="targetUrl" class="target-url" placeholder="Target URL (optional)">
                    <button id="createAgentBtn" class="btn-create" onclick="createAgentFromPrompt()">
                        ğŸš€ Orchestrate
                    </button>
                </div>

                <!-- Output Type Selector -->
                <div class="output-type-row">
                    <span class="type-label">Output:</span>
                    <div class="type-options">
                        <label class="type-option">
                            <input type="radio" name="outputType" value="text" checked>
                            <span>ğŸ“ Text</span>
                        </label>
                        <label class="type-option">
                            <input type="radio" name="outputType" value="image">
                            <span>ğŸ–¼ï¸ Image</span>
                        </label>
                        <label class="type-option">
                            <input type="radio" name="outputType" value="both">
                            <span>ğŸ“Š Both</span>
                        </label>
                        <label class="type-option">
                            <input type="radio" name="outputType" value="json">
                            <span>{ } JSON</span>
                        </label>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Auth Modal -->
    <div id="authModal" class="modal" style="display: none;">
        <div class="modal-content auth-modal">
            <button class="modal-close" onclick="closeAuthModal()">&times;</button>
            
            <div id="loginForm" class="auth-form">
                <h2>ğŸ‘‹ Welcome Back</h2>
                <p class="auth-subtitle">Sign in to access your agents</p>
                <form onsubmit="handleLogin(event)">
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="loginEmail" placeholder="you@example.com" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="loginPassword" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required>
                    </div>
                    <div id="loginError" class="auth-error" style="display: none;"></div>
                    <button type="submit" class="btn-primary btn-full">Sign In</button>
                </form>
                <p class="auth-switch">
                    Don't have an account? <a href="#" onclick="switchAuthMode('register')">Sign up</a>
                </p>
            </div>
            
            <div id="registerForm" class="auth-form" style="display: none;">
                <h2>ğŸš€ Create Account</h2>
                <p class="auth-subtitle">Start creating AI agents</p>
                <form onsubmit="handleRegister(event)">
                    <div class="form-group">
                        <label>Name</label>
                        <input type="text" id="registerName" placeholder="Your name">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" id="registerEmail" placeholder="you@example.com" required>
                    </div>
                    <div class="form-group">
                        <label>Password</label>
                        <input type="password" id="registerPassword" placeholder="At least 6 characters" required minlength="6">
                    </div>
                    <div id="registerError" class="auth-error" style="display: none;"></div>
                    <button type="submit" class="btn-primary btn-full">Create Account</button>
                </form>
                <p class="auth-switch">
                    Already have an account? <a href="#" onclick="switchAuthMode('login')">Sign in</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Agent Detail Modal -->
    <div id="agentModal" class="modal" style="display: none;">
        <div class="modal-content agent-modal">
            <button class="modal-close" onclick="closeAgentModal()">&times;</button>
            <div id="agentModalContent"></div>
        </div>
    </div>

    <script src="/js/app.js"></script>
</body>
</html>
